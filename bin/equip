#!/usr/bin/env bash

### Yes we hardcode variables
GITHUB="https://raw.githubusercontent.com/Polyergic/Shellacc/master/"
BOOTSTRAP="~/tmp/shellac-equip-bootstrap/"

### TODO: check for existance of /usr/bin/env, bash, curl, etc...

### Get into bootstrap dir
mkdir -p "$BOOTSTRAP"
pushd "$BOOTSTRAP"  ## todo: hide output & test for failure

### Check for a compatible platform
RELPATH="bin/platform"
curl "$GITHUB""$RELPATH" --output "$RELPATH" --create-dirs
chmod +x "$RELPATH"
PLATFORM=`$RELPATH`
case "$PLATFORM" in
	"MacOS")
		echo "UNIMPLEMENTED: equip shell under MacOS"
		;;
	*)
		echo "FAILED!:  Unsupported platform $PLATFORM"
		;;
esac

### Cleanup
popd ## todo: hide output & test for failure
rm -rf "$BOOTSTRAP"
